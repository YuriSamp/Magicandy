import Head from 'next/head'
import Navbar from '@ui/Navbar'
import Footer from '@ui/Footer'
import Card from '@ui/Card'
import db from 'data/db.json'
import { IProduto } from 'interface/IProduto'

type Props = {
  dbSort: IProduto[]
}

export async function getServerSideProps() {
  const dbSort = db.sort(() => 0.5 - Math.random()).splice(0, 3);
  return {
    props: { dbSort }
  }
}

export default function Home({ dbSort }: Props) {
  return (
    <>
      <Head>
        <title>MagiCandy</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Navbar />
      <main className='flex flex-col min-h-screen w-full min-w-[320px]  bg-backgroundPink'>
        <div className='flex bg-home-banner p-1 bg-[60%] md:bg-[length:100%_100%] lg:bg-[length:100%_120%] bg-no-repeat bg-cover min-h-[300px] md:h-[400px] lg:h-[500px] items-center justify-center border-b-2 border-fontPurple'>
          <h2 className='text-pink-900 z-10 mt-0 text-[2rem] lg:text-[55px] font-kalam relative 
          before:block before:absolute before:inset-0 before:opacity-30 before:z-0 before:bg-white
          '>A magia da felicidade <br className='hidden md:inline-block' />
            <span className='md:ml-32'>para ado√ßar seu dia!</span> </h2>
        </div>

        <section className="flex grow text-black flex-col h-full gap-x-42 lg:flex-row lg:px-48 gap-16 md:gap-8 px-2 py-16 border-b-2 border-[#8c52ff] items-center justify-evenly flex-wrap">
          {
            dbSort.map(product => (
              <Card
                key={product.Id}
                Id={product.Id}
                Src={product.Src}
                Alt={product.Alt}
                ProductTitle={product.ProductTitle}
                ProductPrice={product.ProductPrice}
              />
            ))
          }
        </section>
      </main>
      <Footer />
    </>
  )
}
